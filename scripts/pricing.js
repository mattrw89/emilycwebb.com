angular.module("shiftLandingApp",["ngCookies","ngResource","angularytics","angularLocalStorage","ngTouch","ngAnimate","ng-currency","uuid4"]).config(["$provide","AngularyticsProvider",function(e,n){n.setEventHandlers(["Console","GoogleUniversal"]),e.decorator("$exceptionHandler",["$delegate",function(e){return function(n,t){e(n,t)}}])}]).run(["Session","InternalAnalyticsService",function(e,n){e.generateNewSessionIdIfNotSet(),n.captureAnalytic("landingPage:pricing",{})}]),!function(e){"use strict";e.module("uuid4",[]).factory("uuid4",function(){var e=function(e){return Math.pow(2,e)},n=(e(4),e(6)),t=e(8),r=e(12),a=(e(14),e(16)),i=e(32),s=(e(40),e(48),function(e,n){return Math.floor(Math.random()*(n-e+1))+e}),c=function(){return s(0,n-1)},o=function(){return s(0,t-1)},u=function(){return s(0,r-1)},l=function(){return s(0,a-1)},g=function(){return s(0,i-1)},d=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},p=function(e,n,t){e=String(e),t=t?t:"0";for(var r=n-e.length;r>0;r>>>=1,t+=t)1&r&&(e=t+e);return e},f=function(e,n,t,r,a,i){var s=p(e.toString(16),8)+"-"+p(n.toString(16),4)+"-"+p(t.toString(16),4)+"-"+p(r.toString(16),2)+p(a.toString(16),2)+"-"+p(i.toString(16),12);return s};return{generate:function(){return f(g(),l(),16384|u(),128|c(),o(),d())},validate:function(e){var n=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return n.test(e)}}})}(angular),angular.module("angularLocalStorage",["ngCookies"]).factory("storage",["$parse","$cookieStore","$window","$log",function(e,n,t,r){var a="undefined"==typeof t.localStorage?void 0:t.localStorage,i=!("undefined"==typeof a||"undefined"==typeof t.JSON),s={parseValue:function(e){var n;try{n=t.JSON.parse(e),"undefined"==typeof n&&(n=e),"true"===n&&(n=!0),"false"===n&&(n=!1),t.parseFloat(n)!==n||angular.isObject(n)||(n=t.parseFloat(n))}catch(r){n=e}return n}},c={set:function(e,c){if(!i)try{return n.put(e,c),c}catch(o){r.log("Local Storage not supported, make sure you have angular-cookies enabled.")}var u=t.JSON.stringify(c);return a.setItem(e,u),s.parseValue(u)},get:function(e){if(!i)try{return s.parseValue($.cookie(e))}catch(n){return null}var t=a.getItem(e);return s.parseValue(t)},remove:function(e){if(!i)try{return n.remove(e),!0}catch(t){return!1}return a.removeItem(e),!0},bind:function(n,t,r){var a={defaultValue:"",storeName:""};r=angular.isString(r)?angular.extend({},a,{defaultValue:r}):angular.isUndefined(r)?a:angular.extend(a,r);var i=r.storeName||t;return c.get(i)||c.set(i,r.defaultValue),e(t).assign(n,c.get(i)),n.$watch(t,function(e){angular.isDefined(e)&&c.set(i,e)},!0),c.get(i)},unbind:function(n,t,r){r=r||t,e(t).assign(n,null),n.$watch(t,function(){}),c.remove(r)},clearAll:function(){a.clear()}};return c}]),!function(){angular.module("angularytics",[]).provider("Angularytics",function(){var e=["Google"];this.setEventHandlers=function(t){angular.isString(t)&&(t=[t]),e=[],angular.forEach(t,function(t){e.push(n(t))})};var n=function(e){return e.charAt(0).toUpperCase()+e.substring(1)},t="$locationChangeSuccess";this.setPageChangeEvent=function(e){t=e},this.$get=["$injector","$rootScope","$location",function(n,r,a){var i=[];angular.forEach(e,function(e){i.push(n.get("Angularytics"+e+"Handler"))});var s=function(e){angular.forEach(i,function(n){e(n)})},c={};return c.init=function(){},c.trackEvent=function(e,n,t,r,a){s(function(i){e&&n&&i.trackEvent(e,n,t,r,a)})},c.trackPageView=function(e){s(function(n){e&&n.trackPageView(e)})},r.$on(t,function(){c.trackPageView(a.path())}),c}]})}(),function(){angular.module("angularytics").factory("AngularyticsConsoleHandler",["$log",function(e){var n={};return n.trackPageView=function(n){e.log("URL visited",n)},n.trackEvent=function(n,t,r,a,i){e.log("Event tracked",n,t,r,a,i)},n}])}(),function(){angular.module("angularytics").factory("AngularyticsGoogleHandler",["$log",function(){var e={};return e.trackPageView=function(e){_gaq.push(["_set","page",e]),_gaq.push(["_trackPageview",e])},e.trackEvent=function(e,n,t,r,a){_gaq.push(["_trackEvent",e,n,t,r,a])},e}]).factory("AngularyticsGoogleUniversalHandler",function(){var e={};return e.trackPageView=function(e){ga("set","page",e),ga("send","pageview",e)},e.trackEvent=function(e,n,t,r,a){ga("send","event",e,n,t,r,{nonInteraction:a})},e})}(),function(){angular.module("angularytics").filter("trackEvent",["Angularytics",function(e){return function(n,t,r,a,i,s){return e.trackEvent(t,r,a,i,s),n}}])}(),angular.module("ng-currency",[]).directive("ngCurrency",["$filter","$locale",function(e,n){return{require:"ngModel",scope:{min:"=min",max:"=max",currencySymbol:"@",ngRequired:"=ngRequired"},link:function(t,r,a,i){function s(e){return RegExp("\\d|\\-|\\"+e,"g")}function c(e){return RegExp("\\-{0,1}((\\"+e+")|([0-9]{1,}\\"+e+"?))&?[0-9]{0,2}","g")}function o(e){e=String(e);var t=n.NUMBER_FORMATS.DECIMAL_SEP,r=null;return RegExp("^-[\\s]*$","g").test(e)&&(e="-0"),s(t).test(e)?(r=e.match(s(t)).join("").match(c(t)),r=r?r[0].replace(t,"."):null):cleaned=null,r}function u(){return angular.isDefined(t.currencySymbol)?t.currencySymbol:n.NUMBER_FORMATS.CURRENCY_SYM}function l(e){if(t.ngRequired||!isNaN(e)){if(t.min){var n=parseFloat(t.min);i.$setValidity("min",e>=n)}if(t.max){var r=parseFloat(t.max);i.$setValidity("max",r>=e)}}}i.$parsers.push(function(e){return cVal=o(e),parseFloat(cVal)}),r.on("blur",function(){r.val(e("currency")(i.$modelValue,u()))}),i.$formatters.unshift(function(n){return e("currency")(n,u())}),t.$watch(function(){return i.$modelValue},function(e,n){l(e)})}}}]),angular.module("shiftLandingApp").controller("HomeCtrl",["$scope","$timeout","Angularytics","$rootScope","InternalAnalyticsService","$interval","LeadSubmissionService","$filter",function(e,n,t,r,a,i,s,c){e.priceLeadForm={companyName:"",name:"",email:"",phoneNumber:"",checkboxes:{iMake:!1,iOversee:!1,iNotMake:!1}},e.priceCalcForm={numEmployees:47,onboardingCost:500,numTurnovers:2,managerSchedulingHours:4,numManagerInteractionsPerWeek:20,managerHourlyRate:10,empCheckSchedule:2},e.priceCalcResults={};var o=function(){var n=e.priceCalcForm.numEmployees;return 29>=n?47:n>=30&&49>=n?67:n>=50&&69>=n?87:n>=70&&89>=n?107:n>=90&&109>=n?127:n>=110&&129>=n?147:n>=130&&149>=n?167:n>=150?null:void 0},u=-1,l=[];i(function(){l.length>0&&(a.captureAnalytic("landingPage:priceCalcChange",_.last(l)),l=[],ga("send",{hitType:"event",eventCategory:"LandingPage",eventAction:"pricingCalculatorChanged"}))},5e3),e.$watch("priceCalcForm",function(){e.priceCalcResults.turnoverCostPerMonth=e.priceCalcForm.onboardingCost*e.priceCalcForm.numTurnovers/12,e.priceCalcResults.schedulingCost=e.priceCalcForm.managerSchedulingHours*e.priceCalcForm.managerHourlyRate*4,e.priceCalcResults.managerInteractionCost=e.priceCalcForm.numManagerInteractionsPerWeek/10*e.priceCalcForm.managerHourlyRate*4,e.priceCalcResults.empConvenienceCost=e.priceCalcForm.empCheckSchedule*e.priceCalcForm.numEmployees/60*4*8,e.priceCalcResults.totalPerMonth=e.priceCalcResults.turnoverCostPerMonth+e.priceCalcResults.schedulingCost+e.priceCalcResults.managerInteractionCost+e.priceCalcResults.empConvenienceCost,e.priceCalcResults.shiftSubscriptionCost=o(),e.priceCalcResults.shiftLaborCost=1*e.priceCalcForm.managerHourlyRate*1,e.priceCalcResults.shiftTotalCost=e.priceCalcResults.shiftSubscriptionCost+e.priceCalcResults.shiftLaborCost,e.priceCalcResults.savingsPerMonth=e.priceCalcResults.totalPerMonth-e.priceCalcResults.shiftTotalCost,e.priceCalcResults.percentSavingsPerMonth=e.priceCalcResults.savingsPerMonth/e.priceCalcResults.totalPerMonth*100,u+=1,u>0&&l.push({formData:e.priceCalcForm,results:e.priceCalcResults})},!0),e.isMoreThanLastPlan=function(){return e.priceCalcForm.numEmployees>=150},e.trackPricingSignupLink=function(){trackSignupClick(null,"pricing-signup-button"),a.captureAnalytic("landingPage:pricingSignupLink:clicked",{},!0)};var g=!1;e.hasSentPricingRequest=!1,e.sendPricingRequestForm=function(){g||(g=!0,s.sendLead(e.priceLeadForm.companyName,e.priceLeadForm.name,e.priceLeadForm.phoneNumber,e.priceLeadForm.email,{results:function(){var n={};return _.each(e.priceCalcResults,function(e,t){n[t]=parseFloat(c("number")(e,2))}),n}(),form:e.priceCalcForm,checks:e.priceLeadForm.checkboxes}).then(function(n){e.hasSentPricingRequest=!0,g=!1,ga("send",{hitType:"event",eventCategory:"LandingPage",eventAction:"pricingRequestFormSubmitted"})},function(){g=!1,e.hasSentPricingRequest=!0}))}}]),angular.module("shiftLandingApp").factory("ServerUrls",["storage","$location",function(e,n){var t={};t.servers=[{name:"Prod",airbrakeEnvironment:"Production",match:["shiftagent.org"],railsApi:"https://shiftagent.org/api/v1/",nodeApi:"https://shiftagent.org/api/v1/",analyticsCaptureApi:"https://analytics-capture-prod.shiftagent.org/",selected:!1},{name:"Dev",airbrakeEnvironment:"Staging",match:["shift-trader.com"],railsApi:"https://shift-trader.com/api/v1/",nodeApi:"https://shift-trader.com/api/v1/",analyticsCaptureApi:"https://analytics-capture-staging.shiftagent.org/",selected:!1},{name:"Local",airbrakeEnvironment:"Development",match:["localhost","127.0.0.1","192.168"],railsApi:"http://localhost:3000/api/v1/",nodeApi:"http://localhost:3002/api/v1/",analyticsCaptureApi:"http://localhost:8080/",selected:!1}],t.current={},t.getRelevantServer=function(){var e=n.host(),r=_.findIndex(t.servers,function(n){return _.contains(n.match,e)});return t.servers[r]},t.changeServer=function(n){angular.isDefined(t.selectedServer)&&(t.servers[t.selectedServer].selected=!1),console.log(n),t.selectedServer=n,e.set("selectedServerIndex",n),t.servers[n].selected=!0,t.current.name=t.servers[n].name,t.current.match=t.servers[n].match,t.current.railsApi=t.servers[n].railsApi,t.current.nodeApi=t.servers[n].nodeApi,t.current.analyticsCaptureApi=t.servers[n].analyticsCaptureApi},t.isRelevantServer=function(){var e=n.host();return _.contains(t.current.match,e)},t.setRelevantServer=function(){var e=n.host(),r=_.findIndex(t.servers,function(n){return _.contains(n.match,e)});return console.log(r),!angular.isDefined(r)||0>r?(t.changeServer(0),0):(t.changeServer(r),r)};var r=e.get("selectedServerIndex");return t.selectedServer=_.isNull(r)?t.setRelevantServer():r,t.servers[t.selectedServer].selected=!0,t.current={},t.current.name=t.servers[t.selectedServer].name,t.current.match=t.servers[t.selectedServer].match,t.current.railsApi=t.servers[t.selectedServer].railsApi,t.current.nodeApi=t.servers[t.selectedServer].nodeApi,t.current.analyticsCaptureApi=t.servers[t.selectedServer].analyticsCaptureApi,t}]),angular.module("shiftLandingApp").service("InternalAnalyticsService",["$http","Session","ServerUrls","$interval",function(e,n,t,r){var a="analytics/event",i=[],s=function(e,t){return this.user_id=n.getCurrentUserId(),(this.user_id===!1||_.isUndefined(this.user_id))&&(this.user_id=null),this.organization_id=n.getCurrentOrgId(),(this.organization_id===!1||_.isUndefined(this.organization_id))&&(this.organization_id=null),this.event_name=e,(_.isUndefined(t)||0===_.keys(t).length)&&(t={}),this.data=t,this.session_uuid=n.getSessionId(),this},c=function(n,r,c){if(_.isUndefined(c))i.push(new s(n,r));else{var o=new s(n,r);e.post(t.current.analyticsCaptureApi+a,[o],{headers:{authorization:"Basic YW5hbHl0aWNzOmdyb3d0aGVraW5nZG9tODk3NiE="}})}};return r(function(){if(i.length>0){var n=_.cloneDeep(i);i.splice(0,n.length),e.post(t.current.analyticsCaptureApi+a,n,{headers:{Authorization:"Basic YW5hbHl0aWNzOmdyb3d0aGVraW5nZG9tODk3NiE="}})}},5e3),{captureAnalytic:c}}]),angular.module("shiftLandingApp").service("LeadSubmissionService",["$http","Session","ServerUrls",function(e,n,t){var r="analytics/lead",a=function(e,t,r,a,i){return this.user_id=n.getCurrentUserId(),(this.user_id===!1||_.isUndefined(this.user_id))&&(this.user_id=null),this.organization_id=n.getCurrentOrgId(),(this.organization_id===!1||_.isUndefined(this.organization_id))&&(this.organization_id=null),(_.isUndefined(i)||0===_.keys(i).length)&&(i={}),this.data=i,this.company_name=e,this.email=a,this.phone_number=r,this.name=t,this.source="landing",this.session_uuid=n.getSessionId(),this},i=function(n,i,s,c,o){var u=new a(n,i,s,c,o);return e.post(t.current.analyticsCaptureApi+r,u,{headers:{Authorization:"Basic YW5hbHl0aWNzOmdyb3d0aGVraW5nZG9tODk3NiE="}})};return{sendLead:i}}]),angular.module("shiftLandingApp").service("Session",["storage","$location","$rootScope","$injector","uuid4",function(e,n,t,r,a){this.generateNewSessionId=function(){var n=a.generate();return e.set("sa_randomSessionId",n),n},this.getSessionId=function(){return e.get("sa_randomSessionId")},this.generateNewSessionIdIfNotSet=function(){var n=e.get("sa_randomSessionId");return _.isNull(n)||_.isUndefined(n)?this.generateNewSessionId():n},this.getCurrentOrgId=function(){return e.get("sa_currentOrgId")},this.getCurrentUserId=function(){var n=e.get("sa_currentUserId");return _.isUndefined(n)||_.isNull(n)?!1:n}}]);
//# sourceMappingURL=pricing.js.map
